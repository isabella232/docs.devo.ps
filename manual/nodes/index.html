<!doctype html>
<html>
<head>
  <meta charset='utf-8'/>
  <meta name='viewport' content='width=device-width, initial-scale=1'/>

  <title>Nodes | devo.ps documentation</title>
  <meta name='keywords' content='devo.ps, DevOps, Cloud, servers, infrastructure, automation, Continuous Integration, Continuous Deployment, Configuration Management, Orchestration, System Administration, PaaS, IaaS, documentation'/>
  <meta name='description' content='Documentation for devo.ps'/>
  
  <!-- Favicons -->
  <link rel='shortcut icon' href='/assets/favicon.ico'>
<link rel='apple-touch-icon' sizes='57x57' href='/assets/favicons/apple-touch-icon-57x57.png'>
<link rel='apple-touch-icon' sizes='114x114' href='/assets/favicons/apple-touch-icon-114x114.png'>
<link rel='apple-touch-icon' sizes='72x72' href='/assets/favicons/apple-touch-icon-72x72.png'>
<link rel='apple-touch-icon' sizes='144x144' href='/assets/favicons/apple-touch-icon-144x144.png'>
<link rel='apple-touch-icon' sizes='60x60' href='/assets/favicons/apple-touch-icon-60x60.png'>
<link rel='apple-touch-icon' sizes='120x120' href='/assets/favicons/apple-touch-icon-120x120.png'>
<link rel='apple-touch-icon' sizes='76x76' href='/assets/favicons/apple-touch-icon-76x76.png'>
<link rel='apple-touch-icon' sizes='152x152' href='/assets/favicons/apple-touch-icon-152x152.png'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-196x196.png' sizes='196x196'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-160x160.png' sizes='160x160'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-96x96.png' sizes='96x96'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-16x16.png' sizes='16x16'>
<link rel='icon' type='image/png' href='/assets/favicons/favicon-32x32.png' sizes='32x32'>
<meta name='msapplication-TileColor' content='#da532c'>
<meta name='msapplication-TileImage' content='/assets/favicons/mstile-144x144.png'>
<meta name='msapplication-config' content='/assets/favicons/browserconfig.xml'>

  <!-- CSS -->
  <link href='/assets/styles.css?0.1.0' rel='stylesheet' type='text/css'/>
</head>
<body>
  <header id='header'>
    <div class='wrapper'>
      <span class='logo'><a href='http://devo.ps'>devo.ps</a> documentation</span>

      <button class='toggle'>Menu</button>
      <nav class='menu'>
        <a href='https://www.hipchat.com/gyHEHtsXZ' target='_blank'>Chat with us</a>
        <a href='http://docs.devo.ps'>Documentation</a>
        <a href='http://devo.ps/about'>About</a>
        <a href='http://devo.ps/blog'>Blog</a>
        <a href='http://app.devo.ps' class='signin'>Sign in</a>
      </nav>
    </div>
  </header>

  <section id='main'>
    <nav class='sidebar'>
      <button class='cancel'><span>Close</span></button>
      <form class='swifttype'>
  <input type='text' id='st-search-input' placeholder='Search by keyword'/>
</form>
<script type='text/javascript'>
var Swiftype = window.Swiftype || {};
  (function() {
    Swiftype.key = 'nkPRs5W_yrQndsebXC-A';

    /** DO NOT EDIT BELOW THIS LINE **/
    var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
    script.src = '//s.swiftypecdn.com/embed.js';
    var entry = document.getElementsByTagName('script')[0];
    entry.parentNode.insertBefore(script, entry);
  }());
</script>
      <nav class='menu'>
        <a href='/' >Getting started</a>

<h3>How to</h3>


  


<a href='/how-to/add-a-server' >Add a server</a>


<h3>Manual</h3>


  

  

  

  

  

  


<a href='/manual/CLI' >CLI</a>

<a href='/manual/git-repositories' >Git &amp; Repositories</a>

<a href='/manual/nodes'  class='active'>Nodes</a>

<a href='/manual/profile' >Profile</a>

<a href='/manual/tasks' >Tasks</a>

<a href='/manual/vars' >Variables</a>


<h3>Providers</h3>


  

  

  

  


<a href='/providers/ec2' >Amazon EC2</a>

<a href='/providers/digitalocean' >Digital Ocean</a>

<a href='/providers/linode' >Linode</a>

<a href='/providers/rackspace' >Rackspace</a>


<h3>Services</h3>


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  


<a href='/services/apache' >Apache</a>

<a href='/services/couchbase' >CouchBase</a>

<a href='/services/couchdb' >CouchDB</a>

<a href='/services/dart' >Dart</a>

<a href='/services/docker' >Docker</a>

<a href='/services/elasticsearch' >ElasticSearch</a>

<a href='/services/fail2ban' >Fail2ban</a>

<a href='/services/git' >Git</a>

<a href='/services/go' >Go</a>

<a href='/services/java' >Java</a>

<a href='/services/memcached' >Memcached</a>

<a href='/services/mongodb' >MongoDB</a>

<a href='/services/mysql' >MySQL</a>

<a href='/services/nginx' >Nginx</a>

<a href='/services/nodejs' >Node.js</a>

<a href='/services/openvpn' >OpenVPN</a>

<a href='/services/php' >PHP</a>

<a href='/services/python' >Python</a>

<a href='/services/rabbitmq' >RabbitMQ</a>

<a href='/services/redis' >Redis</a>

<a href='/services/ruby' >Ruby</a>

<a href='/services/server' >Server</a>

<a href='/services/uwsgi' >uWSGI</a>

<a href='/services/vagrant' >Vagrant</a>

<a href='/services/varnish' >Varnish</a>

<a href='/services/xvfb' >Xvfb</a>

<a href='/services/zeromq' >ZeroMQ</a>

      </nav>
    </nav>

    <section class='content'>
      

<header class='header'>
  <ul class='tags'>
    
  </ul>

  <h1>Nodes </h1>  
</header>

<section class='body'>
  <p>A node is usually a server, either physical or virtual. However, it may also refer to another component of your infrastructure: a firewall, a load balancer or storage (e.g. S3).</p>
<p><em>Currently, we only support servers but are actively working on adding support for load balancers, firewalls and clusters.</em></p>
<h2 id="node-file">Node file</h2>
<p>Each node is defined as a YAML (<code>.yml</code>) file.</p>
<p><em>We currently require that you name the file as the node id (see example) and save it in the <code>nodes/</code> folder. We are working on adding support for arbitrary file names and folders, allowing you to save multiple nodes in a single file.</em></p>
<p>For example, we could add a <code>web.yml</code> file with the following content:</p>
<pre><code>id: nodejs_server
name: Node.js server
type: server

provider:
  name: digitalocean
  size: 66
  location: 3
  image: 5141286

services:
  nodejs: &#39;*&#39;
  nginx: &#39;*&#39;

configuration:
  nodejs:
    packages:
      - gulp
      - forever
      - bower      
</code></pre><p>Once pushed to <code>master</code>, this will provision a 512MB Ubuntu server on Digital Ocean (using the <a href="/manual/profile#providers">provider credentials defined in your profile</a>) in their <code>San Francisco 1</code> datacenter (location and size values are <a href="/providers/digital_ocean/">documented in the provider section</a>). It will also install <a href="/services/nginx">Nginx</a> and <a href="/services/nodejs">Node.js</a> and additionally add the the <code>gulp</code>, <code>forever</code> and <code>bower</code> packages to Node.js.</p>
<h3 id="format">Format</h3>
<dl>
  <dt><code><span class='type'>string</span> id</code></dt>
  <dd>The id of the node, currently has to match the file name.</dd>

  <dt><code><span class='type'>string</span> name</code></dt>
  <dd>The name of the server as displayed in the Web UI and CLI.</dd>

  <dt><code><span class='type'>string</span> type</code></dt.>
  <dd>Type of the node, currently only <code>server</code> is supported.</dd>

  <dt><code><span class='type'>object</span> provider</code></dt>
  <dd>
    The provider information for the node, used for provisioning.
    <dl>
      <dt><code><span class='type'>string</span> name</code></dt>
      <dd>The id of the provider you want to use. We currently support Digital Ocean (<a href="/providers/digital_ocean">digitalocean</a>), EC2 (<a href="/providers/ec2">ec2</a>), Linode (<a href="/providers/linode">linode</a>) and Rackspace (<a href="/providers/rackspace">rackspace</a>).</dd>

      <dt><code><span class='type'>integer</span> size</code></dt>
      <dd>id of the server size to use, as defined in the provider&#39;s documentation.</dd>

      <dt><code><span class='type'>integer</span> location</code></dt>
      <dd>id of the location (datacenter) to use, as defined in the provider&#39;s documentation.</dd>

      <dt><code><span class='type string'>string</span> image</code></dt>
      <dd>id of the image (OS) you want to use.</dd>
    </dl>
  </dd>

  <dt>
    <code><span class='type'>array</span> services</code>
    <span class='optional'>Optional</span>
  </dt>
  <dd>The list of services to be installed on the node; available services are documented in the <strong>Services</strong> section.</dd>

  <dt>
    <code><span class='type'>object</span> configuration</code>
    <span class='optional'>Optional</span>
  </dt>
  <dd>A list of configuration settings to apply to the installed services, as defined in each service&#39;s documentation page. Use the service id as the key (see the <a href="#services">services</a> section below for an example).</dd>
</dl>

<h3 id="services">Services</h3>
<p>A service refers to a technology you want to add support for on your node; it may be a database (MySQL, CouchBase, MongoDB), a language (PHP, Python, Ruby, Node.js), a Web server (NGINX, Apache), a reverse-proxy or a load-balancer (Varnish), HAproxy, Squid)...</p>
<p>When adding a service to a node, you can specify a version or use the <code>*</code> as a wildcard for the latest avaiable version:</p>
<pre><code>services:
  nginx: &#39;*&#39;
</code></pre><p><em>We are currently only support the wildcard option but will soon enable users to pick a specific version of a service and handle service ugprades.</em></p>
<p>Services usually come with configuration and commands, both of which are detailed on the documentation page of the service.</p>
<p>For example, you can configure NGINX&#39;s gzip compression by modifying <code>http.gzip</code> variable, or change the default keepalive timeout (see <a href="/services/nginx/#configuration">NGINX configuration</a>):</p>
<pre><code>services:
  nginx: &#39;*&#39;

configuration:
  nginx:
    http:
      gzip: off
      keepalive_timeout: 120
</code></pre><p>Similarly, services may have commnads that you can use in <a href="/manual/tasks">tasks</a>. For an example, you could use the <code>devops nginx start</code> command (see <a href="/services/nginx/#commands">NGINX commands</a>).</p>
<h2 id="status">Status</h2>
<p>Whenever a change to a node is pushed to your repository, devo.ps will try to apply that change to your infrastructure (more information on this process in the <a href="/manual/git-repositories">git section</a>).</p>
<table>
<thead>
<tr>
<th>Status</th>
<th>Description</th>
<th>Icon</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class='icon synced'></span></td>
<td><strong>Synced</strong></td>
<td>The node is matching the state described in your repository. Traditional configuration management systems call this a &quot;converged&quot; state.</td>
</tr>
<tr>
<td><span class='icon syncing'></span></td>
<td><strong>Syncing</strong></td>
<td>The node is currently being updated to try and reach the state described in your repository. Traditional configuration management systems call &quot;converging&quot;.</td>
</tr>
<tr>
<td> <span class='icon error'></span></td>
<td><strong>Out of sync</strong></td>
<td>The latest snycing failed or the service lost contact with the node. The current state isn&#39;t the same as what is in your repo. Check the console logs for more information.</td>
</tr>
</tbody>
</table>
<p><em>If a syncing fails, the system will try a certain amount of times before giving up. You trigger another series of attempts by using the sync action either through the Web UI or CLI.</em></p>
<h2 id="ssh-keys-users">SSH keys &amp; Users</h2>
<p>A <code>devops</code> user is created on all servers provisioned by devo.ps. This user is used by our service to maintain your servers (add services, update configuration...) and orchestrate <a href="/manual/tasks">tasks</a>.</p>
<p>Additionally, we add the <a href="/manual/profile#ssh">SSH keys defined in the profile</a> of all collaborators to the server&#39;s <code>authorized_keys</code> file for the <code>devops</code> user. This means you can log in as the <code>devops</code> user by simply running the following command:</p>
<p><code class='terminal pre'>ssh devops@{IP ADDRESS}</code></p>
<p><em>The IP address can be retrieved both from the Web UI (in the node&#39;s details) or using the CLI.</em></p>
<p>If you have installed the <a href="/manual/CLI.html">CLI</a>, you can also use one of the following commands:</p>
<ul>
<li><p>From anywhere on your workstation:</p>
<p>  <code class='terminal pre'>devops ssh --repo={REPOSITORY} {NODE_ID}</code></p>
<p>  Where <code>{REPOSITORY}</code> is the name of the repository and <code>{NODE_ID}</code> the id of the node you want to log into.</p>
</li>
<li><p>From within the local repository clone:</p>
<p>  <code class='terminal pre'>devops ssh {NODE_ID}</code></p>
<p>  <em>If you only have 1 node in the repository, <code>devops ssh</code> would suffice.</em></p>
</li>
</ul>

</section>






    </section>
  <section>

  <aside id='support'>
    <h2>Need help?</h2>
    <nav class='links'>
      <a class='chat' href='https://www.hipchat.com/gyHEHtsXZ' target='_blank'>Chat with us</a>
      <a class='help' href='mailto:help@devo.ps' target='_blank'>Contact the support</a>
      <a class='documentation' href='http://docs.devo.ps' target='_blank'>Check the documentation</a>
    </nav>
  </aside>

  <!-- JS -->
  <script src='/assets/scripts.js' type='text/javascript'></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <!--[if lt IE 9]><script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script><![endif]-->
  <script type='text/javascript'>
  var _gauges = _gauges || [];
  (function() {
    var t   = document.createElement('script');
    t.type  = 'text/javascript';
    t.async = true;
    t.id    = 'gauges-tracker';
    t.setAttribute('data-site-id', '510b396a613f5d2666000007');
    t.src = '//secure.gaug.es/track.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(t, s);
  })();
</script>
  <script type='text/javascript'>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34006371-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</body>
</html>
